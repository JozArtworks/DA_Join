@if (showToast) {
    <div class="toast"[class.show]="toastVisible">Contact successfully created</div>
}

@if (showDialog) {
    <app-contact-dialog
        (cancel)="toggleDialog()"
        (create)="onContactCreated()"
        [contactName]="editName"
        [contactMail]="editMail"
        [contactPhone]="editPhone">
    </app-contact-dialog>
}

<section class="contacts-section">
    <div class="contacts-list">
        <button class="new-contact" (click)="newContact()">
            <p>Add new contact</p>
            <img src="./assets/icons/contacts/new_contact.svg" alt="">
        </button>
        <ul>
            @for (letter of groupContactsByFirstLetter(); track letter) {
                <li class="letter-category">
                    <p>{{ letter }}</p>
                    @for (contact of contactsService.contacts; track contact; let index = $index) {
                        @if (letter === contact.name.charAt(0).toUpperCase() &&contact.name != undefined) {
                            <section class="single-contact"
                                (click)="showContactInfo(index)"
                                (click)="signalService.isMobile() ? showInfos() : null"
                                [style.backgroundColor]="activeContactIndex === index && contactClicked ? '#2A3647' : ''"
                                [style.color]="activeContactIndex === index && contactClicked ? 'white' : ''"
                            >
                                <div class="contact-icon-small"
                                [style.backgroundColor]="contact.color"
                                [style.border]="activeContactIndex === index && contactClicked ? '2px solid white' : ''"
                                >
                                    {{contact.name.charAt(0).toUpperCase()}}
                                    {{ lastInitial(index) }}
                                </div>
                                <div>
                                    <p>{{ contact.name }}</p>
                                    <a>{{ contact.mail }}</a>
                                </div>
                            </section>
                        }
                    }
                </li>
            }
        </ul>
    </div>

    <div class="contact-infos"
        [style.opacity]="signalService.isMobile() && !signalService.isInfoShown ? '0': '1'"
        [style.transform]="signalService.isInfoShown && signalService.isMobile() || signalService.isDesktop() ? 'translateX(0)': 'translateX(100%)'"
    >
        <app-contact-info 
            [isClicked]="contactClicked"
            [contactIndex]="activeContactIndex"
            (editContactData)="handleContactData($event)"
            (showDialog)="handleStatusDialog($event)">
        </app-contact-info>
    </div>
</section>