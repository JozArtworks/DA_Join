<section class="task-info-section">
    <div class="task-info-container">
        <div class="task-info-header-container">
            <div class="task-info-top-container">
                <div class="task-info-category"
                    [style.backgroundColor]="taskDataDialogInfo.category === 'User Story'
                    ? '#003cff':'#1FD7C1'"
                    >
                    {{ taskDataDialogInfo.category }}
                </div>
                <div class="task-info-close" (click)="closeDialog()">
                    &#10005;
                </div>
            </div>
            <div class="task-info-header-txt">
                <h2>{{ taskDataDialogInfo.title }}</h2>
            </div>
        </div>
        <div class="task-info-content-container">
            <div class="task-info-build-txt">
                <div class="task-info-description-container">
                    <p>{{ taskDataDialogInfo.description }}</p>
                </div>
            </div>

            <div class="task-info-due-date-container">
                <div class="task-info-due-date-txt">Due date:</div>
                <div class="task-info-due-date-output">
                    {{ taskDataDialogInfo.dueDate | date: 'yyyy-MM-dd' }}
                </div>
            </div>

            <div class="task-info-priority-container">
                <div class="task-info-priority-txt">Priority:</div>
                <div class="task-info-priority-output">
                    <span>{{ taskDataDialogInfo.priority }}</span>
                    @switch (taskDataDialogInfo.priority) {
                        @case ('urgent') {
                            <img class="task-info-priority-img"
                                src="assets/icons/kanban/prio_urgent.svg"
                                alt="urgent" />
                        }
                        @case ('medium') {
                            <img class="task-info-priority-img"
                                src="assets/icons/kanban/prio_medium.svg"
                                alt="Medium" />
                        }
                        @case ('low') {
                            <img class="task-info-priority-img"
                                src="assets/icons/kanban/prio_low.svg"
                                alt="low" />
                        }
                    }
                </div>
            </div>

            <div class="task-info-assigned-to-container">
                <div class="task-info-assigned-to-txt">Assigned To:</div>
                <div class="task-info-assigned-to-output">
                    @for (person of taskDataDialogInfo.assignedTo; track person.contactId) {
                        <div class="assigned-person">
                            <span class="initials"
                                [style.backgroundColor]="contactsService.contactColor(person.contactId)">
                                {{ contactsService.nameInitials(person.contactId) }}
                            </span>
                            <span class="name">
                                {{ contactsService.contactName(person.contactId) }}
                            </span>
                        </div>
                    }
                </div>
            </div>

            <div class="task-info-subtasks-container">
                <div class="task-info-subtasks-header">Subtasks:</div>
                <div class="task-info-subtask-list">
                    @for (subtask of taskDataDialogInfo.subTasks; track subtask.id) {
                        <div class="task-info-subtask-item">
                            <input
                            type="checkbox"
                            [(ngModel)]="subtask.isChecked"
                            (change)="checkSubTask()"
                            [id]="'checkbox-' + subtask.id"
                            />
                            <span [class.completed]="subtask.completed">
                                {{ subtask.text }}
                            </span>
                        </div>
                    }
                </div>
            </div>
        </div>
        <div class="task-info-footer-container">
            <div class="task-info-delete-edit-container">
                <div class="task-info-delete-container" (click)="deleteTask()">
                    <div class="task-info-delete-img">
                    </div>
                    <div class="task-info-delete-txt">Delete</div>
                </div>
                <div class="task-info-between-delete-and-edit">|</div>
                <div class="task-info-edit-container" (click)="onEditTask()">
                    <div class="task-info-edit-img">
                    </div>
                    <div class="task-info-edit-txt">Edit</div>
                </div>
            </div>
        </div>
    </div>
</section>
