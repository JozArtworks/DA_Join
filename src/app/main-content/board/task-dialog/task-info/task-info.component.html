<section class="task-info-section">
    <div class="task-info-top-container">
        <div class="task-info-category">
            {{ task.category }}
        </div>
        <div class="task-info-close" (click)="closeDialog()">
            &#10005;
        </div>
    </div>

    <div class="task-info-header-container">
        <h2>{{ task.title }}</h2>
    </div>

    <div class="task-info-description-container">
        <p>{{ task.description }}</p>
    </div>

    <div class="task-info-due-date-container">
        <div class="task-info-due-date-txt">Due date:</div>
        <div class="task-info-due-date-output">{{ task.dueDate | date: 'yyyy-MM-dd' }}</div>
    </div>

    <div class="task-info-priority-container">
        <div class="task-info-priority-txt">Priority:</div>
        <div class="task-info-priority-output">
            <span>{{ task.priority }}</span>
            @switch (task.priority) {
                @case ('urgent') {
                    <img src="assets/icons/kanban/prio_urgent.svg" alt="urgent" />
                }
                @case ('medium') {
                    <img src="assets/icons/kanban/prio_middle.svg" alt="Medium" />
                }
                @case ('low') {
                    <img src="assets/icons/kanban/prio_low.svg" alt="low" />
                }
            }
        </div>
    </div>

    <div class="task-info-assigned-to-container">
        <div class="task-info-assigned-to-txt">Assigned To:</div>
        <div class="task-info-assigned-to-output">
            @for (person of task.assignedTo; track person.id) {
                <div class="assigned-person">
                    <span class="initials">{{ person.initials }}</span>
                    <span class="name">{{ person.name }}</span>
                </div>
            }
        </div>
    </div>

    <div class="task-info-subtasks-container">
        <div class="task-info-subtasks-header">Subtasks:</div>
        <div class="task-info-subtask-list">
            @for (subtask of task.subTasks; track subtask.name) {
                <div class="task-info-subtask-item">
                    <input type="checkbox" [checked]="subtask.completed" disabled />
                    <span [class.completed]="subtask.completed">{{ subtask.name }}</span>
                </div>
            }
        </div>
    </div>

    <div class="task-info-delete-edit-container">
        <div class="task-info-delete-container" (click)="deleteTask()">
            <div class="task-info-delete-img">
                <img src="assets/icons/delete.svg" alt="Delete Task" />
            </div>
            <div class="task-info-delete-txt">Delete</div>
        </div>

        <div class="task-info-edit-container" (click)="onEditTask()">
            <div class="task-info-edit-img">
                <img src="assets/icons/edit.svg" alt="Edit Task" />
            </div>
            <div class="task-info-edit-txt">Edit</div>
        </div>
    </div>
</section>
